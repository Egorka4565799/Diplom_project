<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Загрузка шаблона</title>
    <link rel="stylesheet" href="/css/document_create.css">
    <link rel="stylesheet" href="/css/loader.css">
    <!--
    <link rel="stylesheet" href="/css/body.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/document-creation-form.css">
    <link rel="stylesheet" href="/css/footer.css">
    -->
</head>

<body>
<header>
    Шапка
</header>

<div class="settings-bar">
    <div class="docx-pdf-img" id="docx-img"><img src="/img/html_docx.png" alt="PDF"></div>
    <div class="docx-pdf-img" id="pdf-img"><img src="/img/html_pdf.png" alt="DOCX"></div>
</div>

<div class="container">
    <div class="filter">
        <form id="uploadForm" method="post" enctype="multipart/form-data">

            <input type="file" name="file" id="file">

            <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
            <input type="hidden" id="fileId" name="fileId" value=""> <!-- Скрытое поле для ID -->

            <button type="button" onclick="uploadTemplate()">Загрузить шаблон</button>

            <div id="category">
                <select id="categoryId" th:name="categoryId">
                    <option th:each="category : ${categories}"
                            th:value="${category.id}"
                            th:text="${category.categoryName}">
                        <!-- Каждая категория будет представлена здесь -->
                    </option>
                </select>

                <button id="addCategoryBtn">+</button> <!-- Кнопка добавления категории -->
            </div>
            <hr/>
            <div>Вопросы</div>
            <hr/>
            <div id="words" >
                <ul>
                    <li th:each="word: ${words}">
                        <span th:text="${word}" name="words[' + word.index + '].key"></span>
                        <label class="add-replacement-label" th:id="'addReplacementLabel-' + ${word}" onclick="toggleReplacements('${word}')">+</label>
                        <ul id="replacements-${word}" style="display: none;"> <!-- Список замен скрыт по умолчанию -->
                            <button type="button" onclick="addReplacementInput(this)">Add Replacement</button>
                            <li>
                                <input type="text" th:name="${'words[' + word.index + '].value[]'}" placeholder="Enter value"/>
                            </li>
                            <!-- Добавьте другие поля ввода для замен при необходимости -->
                        </ul>
                    </li>
                </ul>
            </div>

            <button id="submitButton" type="button" onclick="uploadData()" >Submit</button>
        </form>

    </div>
    <div class="text">
        <div><p>Поле для текста</p></div>
        <!-- <div class="loader" id="loader" style="display: none;"></div> -->
    </div>
    <button class="toggle-button" id="toggleButton">⮞</button>
</div>

<div class="download-section">
    <button class="download-button-start" id="download-button-start">Скачать документ</button>
    <div class="overlay" id="overlay" style="display: none;">
        <div class="loader"></div>
        <button class="download-button-stop" id="download-button-stop">Остановить загрузку</button>
    </div>
</div>

<footer>
    <p>&copy; 2024 Все права защищены</p>
</footer>

<script src="/js/document_create.js"></script>\
<script src="/js/upload-template/upload_template.js"></script>\
</body>
</html>
